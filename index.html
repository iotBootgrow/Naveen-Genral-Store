<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naveen General Stores - WhatsApp Order System Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .demo-container { max-width: 1400px; margin: 0 auto; }

        .header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 { color: #2d3748; font-size: 32px; margin-bottom: 10px; }
        .store-name { color: #667eea; font-weight: bold; }
        .header p { color: #718096; font-size: 18px; }

        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 968px) { .demo-grid { grid-template-columns: 1fr; } }

        .demo-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .panel-header {
            background: #25D366;
            color: white;
            padding: 20px;
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dashboard-header { background: #4a5568; }

        .whatsapp-container {
            height: 600px;
            display: flex;
            flex-direction: column;
            background: #e5ddd5;
        }

        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; }

        .message { margin-bottom: 12px; display: flex; }

        .message-bot { justify-content: flex-start; }
        .message-user { justify-content: flex-end; }

        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .message-bot .message-bubble { background: white; border-radius: 0 8px 8px 8px; }
        .message-user .message-bubble { background: #dcf8c6; border-radius: 8px 0 8px 8px; }

        .product-card {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 6px;
            padding: 10px;
            margin: 5px 0;
        }

        .product-name { font-weight: 600; color: #1e40af; font-size: 14px; }
        .product-price { color: #16a34a; font-weight: bold; font-size: 14px; }
        .product-mrp { color: #94a3b8; text-decoration: line-through; font-size: 12px; margin-left: 5px; }

        .product-savings {
            background: #dcfce7;
            color: #166534;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
            margin-top: 3px;
        }

        .quick-replies { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }

        .quick-reply-btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }

        .input-area {
            padding: 15px;
            background: #f0f0f0;
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 15px;
        }

        .input-area button {
            background: #25D366;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
        }

        .dashboard-container { height: 600px; overflow-y: auto; padding: 20px; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value { font-size: 32px; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 14px; opacity: 0.9; }

        .order-card {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .order-card.new-order { border-color: #48bb78; background: #f0fff4; }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-id { font-weight: bold; color: #2d3748; font-size: 18px; }

        .order-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-new { background: #fed7d7; color: #c53030; }
        .status-confirmed { background: #c6f6d5; color: #2f855a; }

        .customer-info {
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border-radius: 6px;
        }

        .customer-name { font-weight: 600; color: #2d3748; margin-bottom: 5px; }
        .customer-phone { color: #718096; font-size: 14px; margin-bottom: 5px; }
        .customer-address { color: #4a5568; font-size: 14px; }

        .order-items { margin-bottom: 15px; }

        .order-item {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
        }

        .order-item-savings { color: #16a34a; font-size: 12px; font-weight: 600; }

        .order-summary {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .summary-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }

        .summary-row.total {
            font-size: 18px;
            font-weight: bold;
            color: #2d3748;
            padding-top: 8px;
            border-top: 2px solid #e2e8f0;
        }

        .action-buttons { display: flex; gap: 10px; margin-top: 15px; }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-accept { background: #48bb78; color: white; }
        .btn-reject { background: #f56565; color: white; }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .control-btn {
            background: #4a5568;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 10px;
        }
    </style>
</head>
<body>
<div class="demo-container">
    <div class="header">
        <h1>üõí <span class="store-name">Naveen General Stores</span></h1>
        <p>WhatsApp Order System - Live Demo</p>
    </div>

    <div class="demo-grid">
        <div class="demo-panel">
            <div class="panel-header">üì± Customer View (WhatsApp)</div>
            <div class="whatsapp-container">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="input-area">
                    <input type="text" id="userInput" placeholder="Type a message..." />
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <div class="demo-panel">
            <div class="panel-header dashboard-header">üíº Merchant Dashboard</div>
            <div class="dashboard-container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="todayOrders">0</div>
                        <div class="stat-label">Today's Orders</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="todayRevenue">‚Çπ0</div>
                        <div class="stat-label">Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSavings">‚Çπ0</div>
                        <div class="stat-label">Customer Savings</div>
                    </div>
                </div>
                <div id="ordersContainer"></div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="control-btn" onclick="startDemo()">‚ñ∂Ô∏è Start Demo</button>
        <button class="control-btn" onclick="resetDemo()">üîÑ Reset</button>
    </div>
</div>

<script>
let conversationState = 'welcome';
let cart = [];
let orderCounter = 0;
let todayOrders = 0;
let todayRevenue = 0;
let totalSavings = 0;
let deliveryAddress = '';
let customerName = '';

const products = {
    atta: [
        { name: 'Aashirvaad Atta', mrp: 310, price: 280, unit: '5kg' },
        { name: 'Pillsbury Atta', mrp: 295, price: 265, unit: '5kg' }
    ],
    dairy: [
        { name: 'Amul Milk', mrp: 68, price: 60, unit: 'L' },
        { name: 'Amul Butter', mrp: 62, price: 55, unit: '100g' }
    ]
};

function addBotMessage(text) {
    const messagesDiv = document.getElementById('chatMessages');
    const div = document.createElement('div');
    div.className = 'message message-bot';
    div.innerHTML = `<div class="message-bubble">${text}</div>`;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

function addUserMessage(text) {
    const messagesDiv = document.getElementById('chatMessages');
    const div = document.createElement('div');
    div.className = 'message message-user';
    div.innerHTML = `<div class="message-bubble">${text}</div>`;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

function updateStats() {
    document.getElementById('todayOrders').textContent = todayOrders;
    document.getElementById('todayRevenue').textContent = '‚Çπ' + todayRevenue;
    document.getElementById('totalSavings').textContent = '‚Çπ' + totalSavings;
}

function createOrder(items, total, savings, address, name) {
    orderCounter++;
    todayOrders++;
    todayRevenue += total;
    totalSavings += savings;
    updateStats();

    const card = document.createElement('div');
    card.className = 'order-card new-order';
    card.innerHTML = `
        <div class="order-header">
            <div class="order-id">ORD-${orderCounter}</div>
            <div class="order-status status-new">NEW</div>
        </div>
        <div class="customer-info">
            <div class="customer-name">${name}</div>
            <div class="customer-phone">+91 9876543210</div>
            <div class="customer-address">${address}</div>
        </div>
        <div class="order-summary">
            <div class="summary-row total"><span>Total:</span><span>‚Çπ${total}</span></div>
            <div class="summary-row"><span>Savings:</span><span>‚Çπ${savings}</span></div>
        </div>
    `;
    document.getElementById('ordersContainer').prepend(card);
}

function handleConversation(message) {
    if (conversationState === 'welcome') {
        addBotMessage('Welcome to Naveen General Stores! üõí<br>Type: <b>Atta</b> or <b>Dairy</b>');
        conversationState = 'category';
    } 
    else if (conversationState === 'category') {
        if (message.toLowerCase().includes('atta')) {
            addBotMessage('Atta available:<br>1. Aashirvaad Atta (‚Çπ280)<br>Reply: 1 2 (item qty)');
            conversationState = 'ordering';
        } else if (message.toLowerCase().includes('dairy')) {
            addBotMessage('Dairy available:<br>1. Amul Milk (‚Çπ60)<br>Reply: 1 2 (item qty)');
            conversationState = 'ordering';
        }
    }
    else if (conversationState === 'ordering') {
        const match = message.match(/(\d+)\s+(\d+)/);
        if (match) {
            const qty = parseInt(match[2]);
            const product = products.atta[0];
            const total = product.price * qty;
            const savings = (product.mrp - product.price) * qty;
            cart.push({ total, savings });
            addBotMessage(`Added ${qty} ${product.name}. Type CHECKOUT`);
            conversationState = 'cart';
        }
    }
    else if (conversationState === 'cart') {
        if (message.toLowerCase().includes('checkout')) {
            addBotMessage('Please enter delivery address:');
            conversationState = 'address';
        }
    }
    else if (conversationState === 'address') {
        deliveryAddress = message;
        addBotMessage('Enter your name:');
        conversationState = 'name';
    }
    else if (conversationState === 'name') {
        customerName = message;
        const total = cart.reduce((s, i) => s + i.total, 0);
        const savings = cart.reduce((s, i) => s + i.savings, 0);
        createOrder(cart, total, savings, deliveryAddress, customerName);
        addBotMessage('‚úÖ Order placed successfully!');
        cart = [];
        conversationState = 'welcome';
    }
}

function sendMessage() {
    const input = document.getElementById('userInput');
    const msg = input.value.trim();
    if (!msg) return;
    addUserMessage(msg);
    input.value = '';
    handleConversation(msg);
}

function startDemo() {
    document.getElementById('chatMessages').innerHTML = '';
    cart = [];
    conversationState = 'welcome';
    addBotMessage('üëã Hello! Welcome to Naveen General Stores');
}

function resetDemo() {
    document.getElementById('chatMessages').innerHTML = '';
    document.getElementById('ordersContainer').innerHTML = '';
    cart = [];
    conversationState = 'welcome';
    todayOrders = 0;
    todayRevenue = 0;
    totalSavings = 0;
    updateStats();
}
</script>

</body>
</html>
